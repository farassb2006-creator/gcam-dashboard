<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ğŸ‘‘ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ â€“ GCAM Token Full Control</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body {
      font-family: "Tahoma", sans-serif;
      direction: rtl;
      text-align: center;
      background: linear-gradient(160deg, #fffbe6, #ffd700);
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h2 { color: #a57c00; margin-bottom: 10px; }
    section {
      background: #fffef5;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin: 20px auto;
      padding: 20px;
      max-width: 700px;
    }
    button {
      background-color: #a57c00;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
    }
    button:hover { background-color: #8a6500; }
    input {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 250px;
      margin: 5px;
      text-align: center;
    }
    hr { margin: 25px 0; border: 0; height: 2px; background: #f1e17f; }
    #unauthorized {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      padding: 10px;
      margin-top: 30px;
      border-radius: 10px;
      display: none;
    }
  </style>
</head>
<body>

  <h2>ğŸ‘‘ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… GCAM â€“ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø±Ø³Ù…ÙŠ</h2>
  <button id="connectBtn">ğŸ”— Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
  <p id="walletAddress">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¹Ø¯</p>
  <div id="unauthorized">âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø±Ø³Ù…ÙŠ ÙÙ‚Ø·</div>

  <div id="adminPanel" style="display:none;">

    <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
    <section>
      <h3>ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©</h3>
      <p><b>Ø§Ù„Ø§Ø³Ù…:</b> <span id="name">â€”</span></p>
      <p><b>Ø§Ù„Ø±Ù…Ø²:</b> <span id="symbol">â€”</span></p>
      <p><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</b> <span id="totalSupply">â€”</span></p>
      <p><b>Ø§Ù„Ù…Ø§Ù„Ùƒ:</b> <span id="ownerAddr">â€”</span></p>
      <p><b>Ø§Ù„Ø¥ØµØ¯Ø§Ø±:</b> <span id="version">â€”</span></p>
    </section>

    <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ØµÙŠØ¯ -->
    <section>
      <h3>ğŸ’° Ø£Ø±ØµØ¯Ø© Ø§Ù„Ø¹Ù‚Ø¯</h3>
      <p><b>GCAM:</b> <span id="gcamBalance">â€”</span></p>
      <p><b>BNB:</b> <span id="bnbBalance">â€”</span></p>
      <p>
        ğŸª™ Ø¹Ù†ÙˆØ§Ù† Ø¹Ù…Ù„Ø© Ø£Ø®Ø±Ù‰: <input id="tokenAddress" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¹Ù‚Ø¯ USDT">
        <button id="checkOther">Ø¹Ø±Ø¶ Ø§Ù„Ø±ØµÙŠØ¯</button>
      </p>
      <p><b>Ø§Ù„Ø±ØµÙŠØ¯:</b> <span id="otherTokenBal">â€”</span></p>
    </section>

    <!-- Ø§Ù„Ø³Ø­Ø¨ -->
    <section>
      <h3>ğŸ¦ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±ØµØ¯Ø©</h3>
      <input id="withdrawBNBamount" placeholder="ÙƒÙ…ÙŠØ© BNB" type="number">
      <button id="withdrawBNB">Ø³Ø­Ø¨ BNB</button>
      <hr>
      <input id="withdrawTokenAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù…Ù„Ø© ERC20">
      <input id="withdrawTokenAmount" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
      <button id="withdrawToken">Ø³Ø­Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø©</button>
    </section>

    <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ† -->
    <section>
      <h3>âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ†</h3>
      <input id="burnAmount" placeholder="ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø±Ù‚">
      <button id="burnBtn">ğŸ”¥ Ø­Ø±Ù‚ Ù…Ù† Ø§Ù„Ø¹Ù‚Ø¯</button>
      <hr>
      <input id="toAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªÙ„Ù…">
      <input id="sendAmount" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
      <button id="transferBtn">ğŸ’¸ Ø¥Ø±Ø³Ø§Ù„ Ù…Ù† Ø§Ù„Ø¹Ù‚Ø¯</button>
      <hr>
      <button id="unlockBtn">ğŸ”“ ÙØªØ­ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø¬Ù…Ø¯Ø©</button>
      <button id="startBtn">ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø§ÙˆÙ„</button>
    </section>

    <!-- Ø§Ù„ØªØ±Ù‚ÙŠØ© -->
    <section>
      <h3>ğŸ”§ ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯ (Upgrade)</h3>
      <input id="newImplementation" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯">
      <button id="upgradeBtn">ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¯</button>
    </section>

  </div>

  <footer style="margin-top:40px;">Â© 2025 GCAM Token â€“ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„Ø©</footer>

  <script>
    const contractAddress = "0xe5037f8A3B689c986f11d7c84B83be6E8a9199ff";
    const OWNER_FIXED = "0x73276E027d85d8BEB7d3F3f9F17D3612Ce72fD79"; // âœ… Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø§Ù„Ø«Ø§Ø¨Øª
    const abi = [
      {"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},
      {"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"},
      {"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},
      {"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
      {"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFromContract","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFromContract","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[],"name":"unlockAllFrozenTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[],"name":"startTrading","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"upgradeToAndCall","outputs":[],"stateMutability":"payable","type":"function"}
    ];

    let provider, signer, contract;

    async function connectWallet() {
      if (!window.ethereum) return alert("ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª MetaMask Ø£ÙˆÙ„Ø§Ù‹!");
      provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      signer = provider.getSigner();
      const userAddress = (await signer.getAddress()).toLowerCase();
      contract = new ethers.Contract(contractAddress, abi, signer);

      document.getElementById("walletAddress").innerText = `ğŸ“˜ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…ØªØµÙ„Ø©: ${userAddress}`;

      if (userAddress === OWNER_FIXED.toLowerCase()) {
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("unauthorized").style.display = "none";
        loadInfo();
      } else {
        document.getElementById("unauthorized").style.display = "block";
      }
    }

    async function loadInfo() {
      const [name, symbol, total, version, decimals, ownerAddr, gcamBal, bnbBal] = await Promise.all([
        contract.name(), contract.symbol(), contract.totalSupply(),
        contract.version(), contract.decimals(), contract.owner(),
        contract.balanceOf(contractAddress), provider.getBalance(contractAddress)
      ]);
      document.getElementById("name").innerText = name;
      document.getElementById("symbol").innerText = symbol;
      document.getElementById("ownerAddr").innerText = ownerAddr;
      document.getElementById("version").innerText = version;
      document.getElementById("totalSupply").innerText = ethers.utils.formatUnits(total, decimals);
      document.getElementById("gcamBalance").innerText = ethers.utils.formatUnits(gcamBal, decimals);
      document.getElementById("bnbBalance").innerText = ethers.utils.formatEther(bnbBal);
    }

    async function burn() {
      const amt = document.getElementById("burnAmount").value;
      const dec = await contract.decimals();
      const tx = await contract.burnFromContract(ethers.utils.parseUnits(amt, dec));
      await tx.wait(); alert("ğŸ”¥ ØªÙ… Ø§Ù„Ø­Ø±Ù‚ Ø¨Ù†Ø¬Ø§Ø­!"); loadInfo();
    }

    async function transfer() {
      const to = document.getElementById("toAddress").value;
      const amt = document.getElementById("sendAmount").value;
      const dec = await contract.decimals();
      const tx = await contract.transferFromContract(to, ethers.utils.parseUnits(amt, dec));
      await tx.wait(); alert("ğŸ’¸ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!"); loadInfo();
    }

    async function unlock() {
      const tx = await contract.unlockAllFrozenTokens(); await tx.wait(); alert("ğŸ”“ ØªÙ… ÙÙƒ Ø§Ù„Ø±Ù…ÙˆØ²!");
    }

    async function startTrade() {
      const tx = await contract.startTrading(); await tx.wait(); alert("ğŸš€ ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø§ÙˆÙ„!");
    }

    async function upgrade() {
      const newAddr = document.getElementById("newImplementation").value;
      const tx = await contract.upgradeToAndCall(newAddr, "0x");
      await tx.wait(); alert("âœ… ØªÙ…Øª Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");
    }

    async function checkOther() {
      const tokenAddr = document.getElementById("tokenAddress").value;
      const erc20 = new ethers.Contract(tokenAddr, [{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}], provider);
      const bal = await erc20.balanceOf(contractAddress);
      document.getElementById("otherTokenBal").innerText = ethers.utils.formatUnits(bal, 18);
    }

    document.getElementById("connectBtn").onclick = connectWallet;
    document.getElementById("burnBtn").onclick = burn;
    document.getElementById("transferBtn").onclick = transfer;
    document.getElementById("unlockBtn").onclick = unlock;
    document.getElementById("startBtn").onclick = startTrade;
    document.getElementById("upgradeBtn").onclick = upgrade;
    document.getElementById("checkOther").onclick = checkOther;
  </script>
</body>
</html>
